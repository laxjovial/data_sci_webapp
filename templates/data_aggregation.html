{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Data Aggregation</h2>
    <p>Group your data and apply an aggregation function.</p>

    <div class="card mb-4">
        <div class="card-header">
            <h4>Group By & Aggregate</h4>
        </div>
        <div class="card-body">
            <form action="{{ url_for('data_aggregation') }}" method="post">
                <div class="mb-3">
                    <label for="group_by_cols" class="form-label">Group By Columns (Select multiple)</label>
                    <select multiple class="form-control" id="group_by_cols" name="group_by_cols[]" required>
                        {% for column in columns %}
                        <option value="{{ column }}">{{ column }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3">
                    <label for="agg_col" class="form-label">Aggregation Column</label>
                    <select class="form-control" id="agg_col" name="agg_col" required>
                        {% for column in columns %}
                        <option value="{{ column }}">{{ column }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3">
                    <label for="agg_func" class="form-label">Aggregation Function</label>
                    <select class="form-control" id="agg_func" name="agg_func" required>
                        <option value="mean">Mean</option>
                        <option value="median">Median</option>
                        <option value="sum">Sum</option>
                        <option value="count">Count</option>
                        <option value="min">Min</option>
                        <option value="max">Max</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Apply</button>
            </form>
        </div>
    </div>
</div>
{% include 'data_viewer.html' %}
{% endblock %}
